{"version":3,"sources":["src/library/anime.js"],"names":["root","factory","define","amd","module","exports","anime","defaultInstanceSettings","update","undefined","begin","run","complete","loop","direction","autoplay","offset","defaultTweenSettings","duration","delay","easing","elasticity","round","validTransforms","transformString","stringContains","str","text","indexOf","is","arr","a","Array","isArray","obj","Object","prototype","toString","call","pth","hasOwnProperty","svg","SVGElement","dom","nodeType","fnc","und","hex","test","rgb","hsl","col","bezier","kSplineTableSize","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","mY1","mY2","sampleValues","Float32Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","x","easings","names","elastic","t","p","pow","sin","PI","asin","equations","In","Out","f","InOut","functions","linear","type","forEach","apply","stringToHyphens","replace","toLowerCase","selectString","nodes","document","querySelectorAll","e","filterArray","callback","len","length","thisArg","arguments","result","val","push","flattenArray","reduce","b","concat","toArray","o","NodeList","HTMLCollection","slice","arrayContains","some","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","rgbToRgba","rgbValue","exec","hexToRgba","hexValue","rgx","m","r","g","parseInt","hslToRgba","hslValue","h","s","l","hue2rgb","q","colorToRgb","getUnit","split","getTransformUnit","propName","minMaxValue","min","max","getFunctionValue","animatable","target","id","total","getCSSValue","el","prop","style","getComputedStyle","getPropertyValue","getAnimationType","getAttribute","getTransformValue","defaultUnit","defaultVal","transform","match","props","values","value","getOriginalTargetValue","getRelativeValue","to","from","operator","u","parseFloat","y","validateValue","unit","originalUnit","unitLess","substr","getDistance","p1","p2","sqrt","getCircleLength","getRectLength","getLineLength","getPolylineLength","points","totalLength","previousPos","numberOfItems","currentPos","getItem","getPolygonLength","getTotalLength","tagName","setDashoffset","pathLength","setAttribute","getPath","path","percent","property","getPathProgress","progress","point","getPointAtLength","p0","atan2","decomposeValue","original","numbers","map","Number","strings","parseTargets","targets","targetsArray","item","pos","self","getAnimatables","parsed","normalizePropertyTweens","tweenSettings","settings","isFromTo","v","k","getProperties","instanceSettings","params","properties","name","tweens","normalizeTweenValues","tween","normalizeEasing","normalizeTweens","previousTween","tweenValue","originalValue","previousValue","start","end","isPath","isColor","setTweenProgress","css","attribute","object","transforms","createAnimation","animType","getAnimations","animatables","getInstanceTimings","animations","isDelay","anim","createNewInstance","children","activeInstances","raf","engine","play","requestAnimationFrame","step","activeLength","tick","cancelAnimationFrame","now","startTime","lastTime","resolve","makePromise","window","Promise","_resolve","promise","instance","toggleInstanceDirection","reversed","adjustTime","time","syncInstanceChildren","childrenLength","currentTime","seek","setAnimationsProgress","insTime","animationsLength","tweenLength","elapsed","eased","isNaN","toNumbersLength","n","toNumber","fromNumber","stringsLength","currentValue","transformsLength","keys","body","join","setCallback","cb","countIteration","remaining","setInstanceProgress","engineTime","insDuration","insOffset","insStart","insCurrentTime","insReversed","began","pause","completed","reset","loops","paused","speed","splice","reverse","restart","finished","removeTargets","timeline","tl","add","instancesParams","instanceParams","insParams","tlDuration","ins","version","running","remove","getValue","random","floor"],"mappings":"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","file":"anime.cf12adff.map","sourceRoot":"..","sourcesContent":["/**\n * http://animejs.com\n * JavaScript animation engine\n * @version v2.2.0\n * @author Julian Garnier\n * @copyright Â©2017 Julian Garnier\n * Released under the MIT license\n**/\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.anime = factory();\n  }\n}(this, () => {\n\n  // Defaults\n\n  const defaultInstanceSettings = {\n    update: undefined,\n    begin: undefined,\n    run: undefined,\n    complete: undefined,\n    loop: 1,\n    direction: 'normal',\n    autoplay: true,\n    offset: 0\n  }\n\n  const defaultTweenSettings = {\n    duration: 1000,\n    delay: 0,\n    easing: 'easeOutElastic',\n    elasticity: 500,\n    round: 0\n  }\n\n  const validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skewX', 'skewY', 'perspective'];\n  let transformString;\n\n  // Utils\n\n  function stringContains(str, text) {\n    return str.indexOf(text) > -1;\n  }\n\n  const is = {\n    arr: a => Array.isArray(a),\n    obj: a => stringContains(Object.prototype.toString.call(a), 'Object'),\n    pth: a => is.obj(a) && a.hasOwnProperty('totalLength'),\n    svg: a => a instanceof SVGElement,\n    dom: a => a.nodeType || is.svg(a),\n    str: a => typeof a === 'string',\n    fnc: a => typeof a === 'function',\n    und: a => typeof a === 'undefined',\n    hex: a => /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a),\n    rgb: a => /^rgb/.test(a),\n    hsl: a => /^hsl/.test(a),\n    col: a => (is.hex(a) || is.rgb(a) || is.hsl(a))\n  }\n\n  // BezierEasing https://github.com/gre/bezier-easing\n\n  const bezier = (() => {\n\n    const kSplineTableSize = 11;\n    const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 };\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 };\n    function C (aA1)      { return 3.0 * aA1 };\n\n    function calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT };\n    function getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) };\n\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\n      let currentX, currentT, i = 0;\n      do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0) { aB = currentT } else { aA = currentT };\n      } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n      return currentT;\n    }\n\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n      for (let i = 0; i < 4; ++i) {\n        const currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) return aGuessT;\n        const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n      }\n      return aGuessT;\n    }\n\n    function bezier(mX1, mY1, mX2, mY2) {\n\n      if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) return;\n      let sampleValues = new Float32Array(kSplineTableSize);\n\n      if (mX1 !== mY1 || mX2 !== mY2) {\n        for (let i = 0; i < kSplineTableSize; ++i) {\n          sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n        }\n      }\n\n      function getTForX(aX) {\n\n        let intervalStart = 0.0;\n        let currentSample = 1;\n        const lastSample = kSplineTableSize - 1;\n\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n          intervalStart += kSampleStepSize;\n        }\n\n        --currentSample;\n\n        const dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        const guessForT = intervalStart + dist * kSampleStepSize;\n        const initialSlope = getSlope(guessForT, mX1, mX2);\n\n        if (initialSlope >= 0.001) {\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        } else if (initialSlope === 0.0) {\n          return guessForT;\n        } else {\n          return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n        }\n\n      }\n\n      return x => {\n        if (mX1 === mY1 && mX2 === mY2) return x;\n        if (x === 0) return 0;\n        if (x === 1) return 1;\n        return calcBezier(getTForX(x), mY1, mY2);\n      }\n\n    }\n\n    return bezier;\n\n  })();\n\n  const easings = (() => {\n\n    const names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n    // Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\n    function elastic(t, p) {\n      return t === 0 || t === 1 ? t :\n      -Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2.0) * Math.asin(1))) * (Math.PI * 2)) / p );\n    }\n\n    // Approximated Penner equations http://matthewlein.com/ceaser/\n\n    const equations = {\n      In: [\n        [0.550, 0.085, 0.680, 0.530], /* InQuad */\n        [0.550, 0.055, 0.675, 0.190], /* InCubic */\n        [0.895, 0.030, 0.685, 0.220], /* InQuart */\n        [0.755, 0.050, 0.855, 0.060], /* InQuint */\n        [0.470, 0.000, 0.745, 0.715], /* InSine */\n        [0.950, 0.050, 0.795, 0.035], /* InExpo */\n        [0.600, 0.040, 0.980, 0.335], /* InCirc */\n        [0.600, -0.280, 0.735, 0.045], /* InBack */\n        elastic /* InElastic */\n      ], Out: [\n        [0.250, 0.460, 0.450, 0.940], /* OutQuad */\n        [0.215, 0.610, 0.355, 1.000], /* OutCubic */\n        [0.165, 0.840, 0.440, 1.000], /* OutQuart */\n        [0.230, 1.000, 0.320, 1.000], /* OutQuint */\n        [0.390, 0.575, 0.565, 1.000], /* OutSine */\n        [0.190, 1.000, 0.220, 1.000], /* OutExpo */\n        [0.075, 0.820, 0.165, 1.000], /* OutCirc */\n        [0.175, 0.885, 0.320, 1.275], /* OutBack */\n        (t, f) => 1 - elastic(1 - t, f) /* OutElastic */\n      ], InOut: [\n        [0.455, 0.030, 0.515, 0.955], /* InOutQuad */\n        [0.645, 0.045, 0.355, 1.000], /* InOutCubic */\n        [0.770, 0.000, 0.175, 1.000], /* InOutQuart */\n        [0.860, 0.000, 0.070, 1.000], /* InOutQuint */\n        [0.445, 0.050, 0.550, 0.950], /* InOutSine */\n        [1.000, 0.000, 0.000, 1.000], /* InOutExpo */\n        [0.785, 0.135, 0.150, 0.860], /* InOutCirc */\n        [0.680, -0.550, 0.265, 1.550], /* InOutBack */\n        (t, f) => t < .5 ? elastic(t * 2, f) / 2 : 1 - elastic(t * -2 + 2, f) / 2 /* InOutElastic */\n      ]\n    }\n\n    let functions = {\n      linear: bezier(0.250, 0.250, 0.750, 0.750)\n    }\n\n    for (let type in equations) {\n      equations[type].forEach((f, i) => {\n        functions['ease'+type+names[i]] = is.fnc(f) ? f : bezier.apply(this, f);\n      });\n    }\n\n    return functions;\n\n  })();\n\n  // Strings\n\n  function stringToHyphens(str) {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n  }\n\n  function selectString(str) {\n    if (is.col(str)) return;\n    try {\n      let nodes = document.querySelectorAll(str);\n      return nodes;\n    } catch(e) {\n      return;\n    }\n  }\n\n  // Arrays\n\n  function filterArray(arr, callback) {\n    const len = arr.length;\n    const thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n    let result = [];\n    for (let i = 0; i < len; i++) {\n      if (i in arr) {\n        const val = arr[i];\n        if (callback.call(thisArg, val, i, arr)) {\n          result.push(val);\n        }\n      }\n    }\n    return result;\n  }\n\n  function flattenArray(arr) {\n    return arr.reduce((a, b) => a.concat(is.arr(b) ? flattenArray(b) : b), []);\n  }\n\n  function toArray(o) {\n    if (is.arr(o)) return o;\n    if (is.str(o)) o = selectString(o) || o;\n    if (o instanceof NodeList || o instanceof HTMLCollection) return [].slice.call(o);\n    return [o];\n  }\n\n  function arrayContains(arr, val) {\n    return arr.some(a => a === val);\n  }\n\n  // Objects\n\n  function cloneObject(o) {\n    let clone = {};\n    for (let p in o) clone[p] = o[p];\n    return clone;\n  }\n\n  function replaceObjectProps(o1, o2) {\n    let o = cloneObject(o1);\n    for (let p in o1) o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p];\n    return o;\n  }\n\n  function mergeObjects(o1, o2) {\n    let o = cloneObject(o1);\n    for (let p in o2) o[p] = is.und(o1[p]) ? o2[p] : o1[p];\n    return o;\n  }\n\n  // Colors\n\n  function rgbToRgba(rgbValue) {\n    const rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n    return rgb ? `rgba(${rgb[1]},1)` : rgbValue;\n  }\n\n  function hexToRgba(hexValue) {\n    const rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    const hex = hexValue.replace(rgx, (m, r, g, b) => r + r + g + g + b + b );\n    const rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    const r = parseInt(rgb[1], 16);\n    const g = parseInt(rgb[2], 16);\n    const b = parseInt(rgb[3], 16);\n    return `rgba(${r},${g},${b},1)`;\n  }\n\n  function hslToRgba(hslValue) {\n    const hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n    const h = parseInt(hsl[1]) / 360;\n    const s = parseInt(hsl[2]) / 100;\n    const l = parseInt(hsl[3]) / 100;\n    const a = hsl[4] || 1;\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1/6) return p + (q - p) * 6 * t;\n      if (t < 1/2) return q;\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n      return p;\n    }\n    let r, g, b;\n    if (s == 0) {\n      r = g = b = l;\n    } else {\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      const p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1/3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1/3);\n    }\n    return `rgba(${r * 255},${g * 255},${b * 255},${a})`;\n  }\n\n  function colorToRgb(val) {\n    if (is.rgb(val)) return rgbToRgba(val);\n    if (is.hex(val)) return hexToRgba(val);\n    if (is.hsl(val)) return hslToRgba(val);\n  }\n\n  // Units\n\n  function getUnit(val) {\n    const split = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n    if (split) return split[2];\n  }\n\n  function getTransformUnit(propName) {\n    if (stringContains(propName, 'translate') || propName === 'perspective') return 'px';\n    if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) return 'deg';\n  }\n\n  // Values\n\n  function minMaxValue(val, min, max) {\n    return Math.min(Math.max(val, min), max);\n  }\n\n  function getFunctionValue(val, animatable) {\n    if (!is.fnc(val)) return val;\n    return val(animatable.target, animatable.id, animatable.total);\n  }\n\n  function getCSSValue(el, prop) {\n    if (prop in el.style) {\n      return getComputedStyle(el).getPropertyValue(stringToHyphens(prop)) || '0';\n    }\n  }\n\n  function getAnimationType(el, prop) {\n    if (is.dom(el) && arrayContains(validTransforms, prop)) return 'transform';\n    if (is.dom(el) && (el.getAttribute(prop) || (is.svg(el) && el[prop]))) return 'attribute';\n    if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) return 'css';\n    if (el[prop] != null) return 'object';\n  }\n\n  function getTransformValue(el, propName) {\n    const defaultUnit = getTransformUnit(propName);\n    const defaultVal = stringContains(propName, 'scale') ? 1 : 0 + defaultUnit;\n    const str = el.style.transform;\n    if (!str) return defaultVal;\n    let match = [];\n    let props = [];\n    let values = [];\n    const rgx = /(\\w+)\\((.+?)\\)/g;\n    while (match = rgx.exec(str)) {\n      props.push(match[1]);\n      values.push(match[2]);\n    }\n    const value = filterArray(values, (val, i) => props[i] === propName);\n    return value.length ? value[0] : defaultVal;\n  }\n\n  function getOriginalTargetValue(target, propName) {\n    switch (getAnimationType(target, propName)) {\n      case 'transform': return getTransformValue(target, propName);\n      case 'css': return getCSSValue(target, propName);\n      case 'attribute': return target.getAttribute(propName);\n    }\n    return target[propName] || 0;\n  }\n\n  function getRelativeValue(to, from) {\n    const operator = /^(\\*=|\\+=|-=)/.exec(to);\n    if (!operator) return to;\n    const u = getUnit(to) || 0;\n    const x = parseFloat(from);\n    const y = parseFloat(to.replace(operator[0], ''));\n    switch (operator[0][0]) {\n      case '+': return x + y + u;\n      case '-': return x - y + u;\n      case '*': return x * y + u;\n    }\n  }\n\n  function validateValue(val, unit) {\n    if (is.col(val)) return colorToRgb(val);\n    const originalUnit = getUnit(val);\n    const unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n    return unit && !/\\s/g.test(val) ? unitLess + unit : unitLess;\n  }\n\n  // getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes. \n  // adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\n  function getDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)); \n  }\n\n  function getCircleLength(el) {\n    return 2 * Math.PI * el.getAttribute('r');\n  }\n\n  function getRectLength(el) {\n    return (el.getAttribute('width') * 2) + (el.getAttribute('height') * 2);\n  }\n\n  function getLineLength(el) {\n    return getDistance(\n      {x: el.getAttribute('x1'), y: el.getAttribute('y1')}, \n      {x: el.getAttribute('x2'), y: el.getAttribute('y2')}\n    );\n  }\n\n  function getPolylineLength(el) {\n    const points = el.points;\n    let totalLength = 0;\n    let previousPos;\n    for (let i = 0 ; i < points.numberOfItems; i++) {\n      const currentPos = points.getItem(i);\n      if (i > 0) totalLength += getDistance(previousPos, currentPos);\n      previousPos = currentPos;\n    }\n    return totalLength;\n  }\n\n  function getPolygonLength(el) {\n    const points = el.points;\n    return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n  }\n\n  // Path animation\n\n  function getTotalLength(el) {\n    if (el.getTotalLength) return el.getTotalLength();\n    switch(el.tagName.toLowerCase()) {\n      case 'circle': return getCircleLength(el);\n      case 'rect': return getRectLength(el);\n      case 'line': return getLineLength(el);\n      case 'polyline': return getPolylineLength(el);\n      case 'polygon': return getPolygonLength(el);\n    }\n  }\n\n  function setDashoffset(el) {\n    const pathLength = getTotalLength(el);\n    el.setAttribute('stroke-dasharray', pathLength);\n    return pathLength;\n  }\n\n  // Motion path\n\n  function getPath(path, percent) {\n    const el = is.str(path) ? selectString(path)[0] : path;\n    const p = percent || 100;\n    return function(prop) {\n      return {\n        el: el,\n        property: prop,\n        totalLength: getTotalLength(el) * (p / 100)\n      }\n    }\n  }\n\n  function getPathProgress(path, progress) {\n    function point(offset = 0) {\n      const l = progress + offset >= 1 ? progress + offset : 0;\n      return path.el.getPointAtLength(l);\n    }\n    const p = point();\n    const p0 = point(-1);\n    const p1 = point(+1);\n    switch (path.property) {\n      case 'x': return p.x;\n      case 'y': return p.y;\n      case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n    }\n  }\n\n  // Decompose value\n\n  function decomposeValue(val, unit) {\n    const rgx = /-?\\d*\\.?\\d+/g;\n    const value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n    return {\n      original: value,\n      numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n      strings: (is.str(val) || unit) ? value.split(rgx) : []\n    }\n  }\n\n  // Animatables\n\n  function parseTargets(targets) {\n    const targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n    return filterArray(targetsArray, (item, pos, self) => self.indexOf(item) === pos);\n  }\n\n  function getAnimatables(targets) {\n    const parsed = parseTargets(targets);\n    return parsed.map((t, i) => {\n      return {target: t, id: i, total: parsed.length};\n    });\n  }\n\n  // Properties\n\n  function normalizePropertyTweens(prop, tweenSettings) {\n    let settings = cloneObject(tweenSettings);\n    if (is.arr(prop)) {\n      const l = prop.length;\n      const isFromTo = (l === 2 && !is.obj(prop[0]));\n      if (!isFromTo) {\n        // Duration divided by the number of tweens\n        if (!is.fnc(tweenSettings.duration)) settings.duration = tweenSettings.duration / l;\n      } else {\n        // Transform [from, to] values shorthand to a valid tween value\n        prop = {value: prop};\n      }\n    }\n    return toArray(prop).map((v, i) => {\n      // Default delay value should be applied only on the first tween\n      const delay = !i ? tweenSettings.delay : 0;\n      // Use path object as a tween value\n      let obj = is.obj(v) && !is.pth(v) ? v : {value: v};\n      // Set default delay value\n      if (is.und(obj.delay)) obj.delay = delay;\n      return obj;\n    }).map(k => mergeObjects(k, settings));\n  }\n\n  function getProperties(instanceSettings, tweenSettings, params) {\n    let properties = [];\n    const settings = mergeObjects(instanceSettings, tweenSettings);\n    for (let p in params) {\n      if (!settings.hasOwnProperty(p) && p !== 'targets') {\n        properties.push({\n          name: p,\n          offset: settings['offset'],\n          tweens: normalizePropertyTweens(params[p], tweenSettings)\n        });\n      }\n    }\n    return properties;\n  }\n\n  // Tweens\n\n  function normalizeTweenValues(tween, animatable) {\n    let t = {};\n    for (let p in tween) {\n      let value = getFunctionValue(tween[p], animatable);\n      if (is.arr(value)) {\n        value = value.map(v => getFunctionValue(v, animatable));\n        if (value.length === 1) value = value[0];\n      }\n      t[p] = value;\n    }\n    t.duration = parseFloat(t.duration);\n    t.delay = parseFloat(t.delay);\n    return t;\n  }\n\n  function normalizeEasing(val) {\n    return is.arr(val) ? bezier.apply(this, val) : easings[val];\n  }\n\n  function normalizeTweens(prop, animatable) {\n    let previousTween;\n    return prop.tweens.map(t => {\n      let tween = normalizeTweenValues(t, animatable);\n      const tweenValue = tween.value;\n      const originalValue = getOriginalTargetValue(animatable.target, prop.name);\n      const previousValue = previousTween ? previousTween.to.original : originalValue;\n      const from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n      const to = getRelativeValue(is.arr(tweenValue) ? tweenValue[1] : tweenValue, from);\n      const unit = getUnit(to) || getUnit(from) || getUnit(originalValue);\n      tween.from = decomposeValue(from, unit);\n      tween.to = decomposeValue(to, unit);\n      tween.start = previousTween ? previousTween.end : prop.offset;\n      tween.end = tween.start + tween.delay + tween.duration;\n      tween.easing = normalizeEasing(tween.easing);\n      tween.elasticity = (1000 - minMaxValue(tween.elasticity, 1, 999)) / 1000;\n      tween.isPath = is.pth(tweenValue);\n      tween.isColor = is.col(tween.from.original);\n      if (tween.isColor) tween.round = 1;\n      previousTween = tween;\n      return tween;\n    });\n  }\n\n  // Tween progress\n\n  const setTweenProgress = {\n    css: (t, p, v) => t.style[p] = v,\n    attribute: (t, p, v) => t.setAttribute(p, v),\n    object: (t, p, v) => t[p] = v,\n    transform: (t, p, v, transforms, id) => {\n      if (!transforms[id]) transforms[id] = [];\n      transforms[id].push(`${p}(${v})`);\n    }\n  }\n\n  // Animations\n\n  function createAnimation(animatable, prop) {\n    const animType = getAnimationType(animatable.target, prop.name);\n    if (animType) {\n      const tweens = normalizeTweens(prop, animatable);\n      return {\n        type: animType,\n        property: prop.name,\n        animatable: animatable,\n        tweens: tweens,\n        duration: tweens[tweens.length - 1].end,\n        delay: tweens[0].delay\n      }\n    }\n  }\n\n  function getAnimations(animatables, properties) {\n    return filterArray(flattenArray(animatables.map(animatable => {\n      return properties.map(prop => {\n        return createAnimation(animatable, prop);\n      });\n    })), a => !is.und(a));\n  }\n\n  // Create Instance\n\n  function getInstanceTimings(type, animations, instanceSettings, tweenSettings) {\n    const isDelay = (type === 'delay');\n    if (animations.length) {\n      return (isDelay ? Math.min : Math.max).apply(Math, animations.map(anim => anim[type]));\n    } else {\n      return isDelay ? tweenSettings.delay : instanceSettings.offset + tweenSettings.delay + tweenSettings.duration;\n    }\n  }\n\n  function createNewInstance(params) {\n    const instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n    const tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n    const animatables = getAnimatables(params.targets);\n    const properties = getProperties(instanceSettings, tweenSettings, params);\n    const animations = getAnimations(animatables, properties);\n    return mergeObjects(instanceSettings, {\n      children: [],\n      animatables: animatables,\n      animations: animations,\n      duration: getInstanceTimings('duration', animations, instanceSettings, tweenSettings),\n      delay: getInstanceTimings('delay', animations, instanceSettings, tweenSettings)\n    });\n  }\n\n  // Core\n\n  let activeInstances = [];\n  let raf = 0;\n\n  const engine = (() => {\n    function play() { raf = requestAnimationFrame(step); };\n    function step(t) {\n      const activeLength = activeInstances.length;\n      if (activeLength) {\n        let i = 0;\n        while (i < activeLength) {\n          if (activeInstances[i]) activeInstances[i].tick(t);\n          i++;\n        }\n        play();\n      } else {\n        cancelAnimationFrame(raf);\n        raf = 0;\n      }\n    }\n    return play;\n  })();\n\n\n  // Public Instance\n\n  function anime(params = {}) {\n\n    let now, startTime, lastTime = 0;\n\n    let resolve = null;\n\n    function makePromise() {\n      return window.Promise && new Promise(_resolve => resolve = _resolve);\n    }\n\n    let promise = makePromise();\n\n    let instance = createNewInstance(params);\n\n    function toggleInstanceDirection() {\n      instance.reversed = !instance.reversed;\n    }\n\n    function adjustTime(time) {\n      return instance.reversed ? instance.duration - time : time;\n    }\n\n    function syncInstanceChildren(time) {\n      const children = instance.children;\n      const childrenLength = children.length;\n      if (time >= instance.currentTime) {\n        for (let i = 0; i < childrenLength; i++) children[i].seek(time);\n      } else {\n        for (let i = childrenLength; i--;) children[i].seek(time);\n      }\n    }\n\n    function setAnimationsProgress(insTime) {\n      let i = 0;\n      let transforms = {};\n      const animations = instance.animations;\n      const animationsLength = animations.length;\n      while (i < animationsLength) {\n        const anim = animations[i];\n        const animatable = anim.animatable;\n        const tweens = anim.tweens;\n        const tweenLength = tweens.length - 1;\n        let tween = tweens[tweenLength];\n        // Only check for keyframes if there is more than one tween\n        if (tweenLength) tween = filterArray(tweens, t => (insTime < t.end))[0] || tween;\n        const elapsed = minMaxValue(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n        const eased = isNaN(elapsed) ? 1 : tween.easing(elapsed, tween.elasticity);\n        const strings = tween.to.strings;\n        const round = tween.round;\n        let numbers = [];\n        let progress;\n        const toNumbersLength = tween.to.numbers.length;\n        for (let n = 0; n < toNumbersLength; n++) {\n          let value;\n          const toNumber = tween.to.numbers[n];\n          const fromNumber = tween.from.numbers[n];\n          if (!tween.isPath) {\n            value = fromNumber + (eased * (toNumber - fromNumber));\n          } else {\n            value = getPathProgress(tween.value, eased * toNumber);\n          }\n          if (round) {\n            if (!(tween.isColor && n > 2)) {\n              value = Math.round(value * round) / round;\n            }\n          }\n          numbers.push(value);\n        }\n        // Manual Array.reduce for better performances\n        const stringsLength = strings.length;\n        if (!stringsLength) {\n          progress = numbers[0];\n        } else {\n          progress = strings[0];\n          for (let s = 0; s < stringsLength; s++) {\n            const a = strings[s];\n            const b = strings[s + 1];\n            const n = numbers[s];\n            if (!isNaN(n)) {\n              if (!b) {\n                progress += n + ' ';\n              } else {\n                progress += n + b;\n              }\n            }\n          }\n        }\n        setTweenProgress[anim.type](animatable.target, anim.property, progress, transforms, animatable.id);\n        anim.currentValue = progress;\n        i++;\n      }\n      const transformsLength = Object.keys(transforms).length;\n      if (transformsLength) {\n        for (let id = 0; id < transformsLength; id++) {\n          if (!transformString) {\n            const t = 'transform';\n            transformString = (getCSSValue(document.body, t) ? t : `-webkit-${t}`);\n          }\n          instance.animatables[id].target.style[transformString] = transforms[id].join(' ');\n        }\n      }\n      instance.currentTime = insTime;\n      instance.progress = (insTime / instance.duration) * 100;\n    }\n\n    function setCallback(cb) {\n      if (instance[cb]) instance[cb](instance);\n    }\n\n    function countIteration() {\n      if (instance.remaining && instance.remaining !== true) {\n        instance.remaining--;\n      }\n    }\n\n    function setInstanceProgress(engineTime) {\n      const insDuration = instance.duration;\n      const insOffset = instance.offset;\n      const insStart = insOffset + instance.delay;\n      const insCurrentTime = instance.currentTime;\n      const insReversed = instance.reversed;\n      const insTime = adjustTime(engineTime);\n      if (instance.children.length) syncInstanceChildren(insTime);\n      if (insTime >= insStart || !insDuration) {\n        if (!instance.began) {\n          instance.began = true;\n          setCallback('begin');\n        }\n        setCallback('run');\n      }\n      if (insTime > insOffset && insTime < insDuration) {\n        setAnimationsProgress(insTime);\n      } else {\n        if (insTime <= insOffset && insCurrentTime !== 0) {\n          setAnimationsProgress(0);\n          if (insReversed) countIteration();\n        }\n        if ((insTime >= insDuration && insCurrentTime !== insDuration) || !insDuration) {\n          setAnimationsProgress(insDuration);\n          if (!insReversed) countIteration();\n        }\n      }\n      setCallback('update');\n      if (engineTime >= insDuration) {\n        if (instance.remaining) {\n          startTime = now;\n          if (instance.direction === 'alternate') toggleInstanceDirection();\n        } else {\n          instance.pause();\n          if (!instance.completed) {\n            instance.completed = true;\n            setCallback('complete');\n            if ('Promise' in window) {\n              resolve();\n              promise = makePromise();\n            }\n          }\n        }\n        lastTime = 0;\n      }\n    }\n\n    instance.reset = function() {\n      const direction = instance.direction;\n      const loops = instance.loop;\n      instance.currentTime = 0;\n      instance.progress = 0;\n      instance.paused = true;\n      instance.began = false;\n      instance.completed = false;\n      instance.reversed = direction === 'reverse';\n      instance.remaining = direction === 'alternate' && loops === 1 ? 2 : loops;\n      setAnimationsProgress(0);\n      for (let i = instance.children.length; i--; ){\n        instance.children[i].reset();\n      }\n    }\n\n    instance.tick = function(t) {\n      now = t;\n      if (!startTime) startTime = now;\n      const engineTime = (lastTime + now - startTime) * anime.speed;\n      setInstanceProgress(engineTime);\n    }\n\n    instance.seek = function(time) {\n      setInstanceProgress(adjustTime(time));\n    }\n\n    instance.pause = function() {\n      const i = activeInstances.indexOf(instance);\n      if (i > -1) activeInstances.splice(i, 1);\n      instance.paused = true;\n    }\n\n    instance.play = function() {\n      if (!instance.paused) return;\n      instance.paused = false;\n      startTime = 0;\n      lastTime = adjustTime(instance.currentTime);\n      activeInstances.push(instance);\n      if (!raf) engine();\n    }\n\n    instance.reverse = function() {\n      toggleInstanceDirection();\n      startTime = 0;\n      lastTime = adjustTime(instance.currentTime);\n    }\n\n    instance.restart = function() {\n      instance.pause();\n      instance.reset();\n      instance.play();\n    }\n\n    instance.finished = promise;\n\n    instance.reset();\n\n    if (instance.autoplay) instance.play();\n\n    return instance;\n\n  }\n\n  // Remove targets from animation\n\n  function removeTargets(targets) {\n    const targetsArray = parseTargets(targets);\n    for (let i = activeInstances.length; i--;) {\n      const instance = activeInstances[i];\n      const animations = instance.animations;\n      for (let a = animations.length; a--;) {\n        if (arrayContains(targetsArray, animations[a].animatable.target)) {\n          animations.splice(a, 1);\n          if (!animations.length) instance.pause();\n        }\n      }\n    }\n  }\n\n  // Timeline\n\n  function timeline(params) {\n    let tl = anime(params);\n    tl.pause();\n    tl.duration = 0;\n    tl.add = function(instancesParams) {\n      tl.children.forEach(i => { i.began = true; i.completed = true; });\n      toArray(instancesParams).forEach(instanceParams => {\n        let insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params || {}));\n        insParams.targets = insParams.targets || params.targets;\n        const tlDuration = tl.duration;\n        const insOffset = insParams.offset;\n        insParams.autoplay = false;\n        insParams.direction = tl.direction;\n        insParams.offset = is.und(insOffset) ? tlDuration : getRelativeValue(insOffset, tlDuration);\n        tl.began = true;\n        tl.completed = true;\n        tl.seek(insParams.offset);\n        const ins = anime(insParams);\n        ins.began = true;\n        ins.completed = true;\n        if (ins.duration > tlDuration) tl.duration = ins.duration;\n        tl.children.push(ins);\n      });\n      tl.seek(0);\n      tl.reset();\n      if (tl.autoplay) tl.restart();\n      return tl;\n    }\n    return tl;\n  }\n\n  anime.version = '2.2.0';\n  anime.speed = 1;\n  anime.running = activeInstances;\n  anime.remove = removeTargets;\n  anime.getValue = getOriginalTargetValue;\n  anime.path = getPath;\n  anime.setDashoffset = setDashoffset;\n  anime.bezier = bezier;\n  anime.easings = easings;\n  anime.timeline = timeline;\n  anime.random = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\n\n  return anime;\n\n}));\n"]}